 
Пошаговая инструкция: Как создать блокчейн на Python
Что такое блокчейн?
Блокчейн — это распределенная база данных, состоящая из последовательности блоков, связанных между собой криптографическими хешами. Каждый блок содержит набор транзакций, временную метку и ссылку на предыдущий блок, что делает данные неизменяемыми и защищенными от подделки.[1][2][3]
Необходимые инструменты
Для создания блокчейна вам понадобятся:
Python 3.6+ — язык программирования[2][3]
Flask — веб-фреймворк для создания API[4][5][2]
hashlib — библиотека для хеширования (встроенная в Python)[6][7][8]
requests — для взаимодействия с API[9]
Установка зависимостей
pip install Flask==2.0.1 requests==2.26.0

Шаг 1: Создание класса Blockchain
Начнем с создания основного класса Blockchain, который будет управлять нашей цепочкой блоков.[3][10][1]
Инициализация блокчейна
import hashlib
import json
from time import time

class Blockchain:
    def __init__(self):
        self.chain = []  # Список для хранения блоков
        self.current_transactions = []  # Текущие транзакции
        
        # Создаем первый блок (генезис-блок)
        self.new_block(previous_hash='1', proof=100)

Объяснение:
•	self.chain хранит все блоки в хронологическом порядке[11][12]
•	self.current_transactions содержит транзакции, ожидающие добавления в следующий блок[13][11]
•	Генезис-блок — это первый блок в цепи, у него нет предшественника[10][14]
Шаг 2: Создание структуры блока
Каждый блок содержит индекс, временную метку, список транзакций, доказательство работы (proof) и хеш предыдущего блока.[14][1][3]
def new_block(self, proof, previous_hash=None):
    """
    Создание нового блока
    
    :param proof: Доказательство работы
    :param previous_hash: Хеш предыдущего блока
    :return: Новый блок
    """
    block = {
        'index': len(self.chain) + 1,
        'timestamp': time(),
        'transactions': self.current_transactions,
        'proof': proof,
        'previous_hash': previous_hash or self.hash(self.chain[-1]),
    }
    
    # Очищаем список транзакций
    self.current_transactions = []
    
    # Добавляем блок в цепь
    self.chain.append(block)
    return block

Объяснение:
•	index — порядковый номер блока в цепи[1][14]
•	timestamp — время создания блока в формате Unix[14][13]
•	transactions — список транзакций в блоке[13][11]
•	proof — число, найденное алгоритмом Proof of Work[2][9]
•	previous_hash — хеш предыдущего блока, связывающий блоки в цепь[3][1]
Шаг 3: Создание транзакций
Транзакции — это записи о передаче данных или ценностей между участниками сети.[13]
def new_transaction(self, sender, recipient, amount):
    """
    Создание новой транзакции
    
    :param sender: Адрес отправителя
    :param recipient: Адрес получателя
    :param amount: Сумма
    :return: Индекс блока, в который будет добавлена транзакция
    """
    self.current_transactions.append({
        'sender': sender,
        'recipient': recipient,
        'amount': amount,
    })
    
    return self.last_block['index'] + 1

@property
def last_block(self):
    """Возвращает последний блок в цепи"""
    return self.chain[-1]

Объяснение:
•	Транзакция добавляется в список current_transactions[11][13]
•	Функция возвращает индекс блока, в который транзакция будет включена[5][13]
•	last_block — вспомогательное свойство для быстрого доступа к последнему блоку[15][11]
Шаг 4: Хеширование блоков (SHA-256)
Хеширование обеспечивает целостность данных и связывает блоки в цепь.[7][16][6]
@staticmethod
def hash(block):
    """
    Создает SHA-256 хеш блока
    
    :param block: Блок для хеширования
    :return: Строка с хешем
    """
    # Сортируем данные для консистентности
    block_string = json.dumps(block, sort_keys=True).encode()
    return hashlib.sha256(block_string).hexdigest()

Объяснение:
•	SHA-256 создает уникальный 64-символьный хеш для каждого блока[8][6][7]
•	sort_keys=True гарантирует, что одинаковые данные всегда дают одинаковый хеш[9][6]
•	encode() конвертирует строку в байты для хеширования[6][7]
•	hexdigest() возвращает хеш в шестнадцатеричном формате[16][8][6]
Шаг 5: Алгоритм Proof of Work (доказательство работы)
Proof of Work — это механизм консенсуса, который требует вычислительных усилий для создания нового блока.[17][2][9]
def proof_of_work(self, last_proof):
    """
    Алгоритм Proof of Work:
    - Найти число p' такое, что hash(pp') содержит 4 ведущих нуля
    
    :param last_proof: Предыдущее доказательство
    :return: Новое доказательство
    """
    proof = 0
    while self.valid_proof(last_proof, proof) is False:
        proof += 1
    
    return proof

@staticmethod
def valid_proof(last_proof, proof):
    """
    Проверка доказательства
    
    :param last_proof: Предыдущее доказательство
    :param proof: Текущее доказательство
    :return: True если хеш содержит 4 ведущих нуля
    """
    guess = f'{last_proof}{proof}'.encode()
    guess_hash = hashlib.sha256(guess).hexdigest()
    return guess_hash[:4] == "0000"

Объяснение:
•	Алгоритм ищет число, хеш которого начинается с четырех нулей[5][2][9]
•	Это создает вычислительную сложность — требуется много попыток[17][9]
•	Найденное число легко проверить, но сложно найти[9][17]
•	Чем больше нулей требуется, тем сложнее майнинг[2][9]
Шаг 6: Создание API с Flask
Flask позволяет взаимодействовать с блокчейном через HTTP-запросы.[4][5][2]
from flask import Flask, jsonify, request
from uuid import uuid4

# Создаем Flask приложение
app = Flask(__name__)

# Генерируем уникальный адрес узла
node_identifier = str(uuid4()).replace('-', '')

# Создаем блокчейн
blockchain = Blockchain()

Эндпоинт для майнинга
@app.route('/mine', methods=['GET'])
def mine():
    """Майнинг нового блока"""
    # Получаем последний блок
    last_block = blockchain.last_block
    last_proof = last_block['proof']
    
    # Вычисляем Proof of Work
    proof = blockchain.proof_of_work(last_proof)
    
    # Награда за майнинг
    blockchain.new_transaction(
        sender="0",
        recipient=node_identifier,
        amount=1,
    )
    
    # Создаем новый блок
    previous_hash = blockchain.hash(last_block)
    block = blockchain.new_block(proof, previous_hash)
    
    response = {
        'message': "Новый блок создан!",
        'index': block['index'],
        'transactions': block['transactions'],
        'proof': block['proof'],
        'previous_hash': block['previous_hash'],
    }
    return jsonify(response), 200

Объяснение:
•	Эндпоинт /mine запускает процесс майнинга[4][5][2]
•	Майнер получает вознаграждение (sender="0" означает создание новых монет)[2][4]
•	Возвращается информация о созданном блоке[5][2]
Эндпоинт для создания транзакций
@app.route('/transactions/new', methods=['POST'])
def new_transaction():
    """Создание новой транзакции"""
    values = request.get_json()
    
    # Проверяем обязательные поля
    required = ['sender', 'recipient', 'amount']
    if not all(k in values for k in required):
        return 'Отсутствуют необходимые поля', 400
    
    # Создаем транзакцию
    index = blockchain.new_transaction(
        values['sender'], 
        values['recipient'], 
        values['amount']
    )
    
    response = {'message': f'Транзакция будет добавлена в блок {index}'}
    return jsonify(response), 201

Объяснение:
•	Принимает JSON с данными транзакции[4][5]
•	Проверяет наличие обязательных полей: sender, recipient, amount[9][5]
•	Добавляет транзакцию в очередь[5][4]
Эндпоинт для просмотра цепи
@app.route('/chain', methods=['GET'])
def full_chain():
    """Получение всей цепи блоков"""
    response = {
        'chain': blockchain.chain,
        'length': len(blockchain.chain),
    }
    return jsonify(response), 200

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)

Объяснение:
•	Возвращает всю цепь блоков и её длину[4][5]
•	Сервер запускается на порту 5000[9][4]
Шаг 7: Запуск и тестирование
Запуск сервера
python blockchain_tutorial.py

Сервер запустится на http://localhost:5000.[9][4]
Тестирование через curl или Postman
Просмотр цепи блоков:
curl http://localhost:5000/chain

Создание транзакции:
curl -X POST http://localhost:5000/transactions/new \
  -H "Content-Type: application/json" \
  -d '{
    "sender": "адрес1",
    "recipient": "адрес2",
    "amount": 5
  }'

Майнинг блока:
curl http://localhost:5000/mine

Ключевые концепции блокчейна
Неизменяемость
Каждый блок содержит хеш предыдущего блока. Если изменить данные в одном блоке, изменится его хеш, что нарушит связь с последующими блоками.[1][3][17]
Децентрализация
В реальном блокчейне множество узлов хранят копию цепи. Для полной реализации нужно добавить механизм консенсуса между узлами.[18][19][17]
Криптографическая безопасность
SHA-256 обеспечивает уникальность и защиту от подделки. Даже минимальное изменение данных полностью меняет хеш.[7][8][6]
Дополнительные улучшения
Для более продвинутого блокчейна можно добавить:
Регистрацию узлов — для создания распределенной сети[17][9]
Алгоритм консенсуса — для разрешения конфликтов между узлами[20][18][17]
Цифровые подписи — для проверки подлинности транзакций[21][4]
Proof of Stake — альтернативный механизм консенсуса[22][19]
Валидацию цепи — проверку целостности всей цепи блоков[3][9]
Заключение
Вы создали функциональный блокчейн на Python с основными компонентами: блоками, транзакциями, хешированием и Proof of Work. Этот проект демонстрирует фундаментальные принципы технологии блокчейн, на которых построены криптовалюты вроде Bitcoin и Ethereum.[23][21][1][3][17][2]
Код полностью готов к запуску и тестированию. Вы можете экспериментировать, добавлять новые функции и расширять функциональность для более глубокого понимания технологии блокчейн.

⁂
 
1.	https://www.geeksforgeeks.org/python/create-simple-blockchain-using-python/       
2.	https://www.linkedin.com/pulse/blockchain-development-using-python-comprehensive-guide-nizam-thakur-vs0vc            
3.	https://webisoft.com/articles/how-to-create-blockchain-in-python/        
4.	https://adilmoujahid.com/posts/2018/03/intro-blockchain-bitcoin-python/          
5.	https://blog.krybot.com/t/creating-a-blockchain-with-python/23205          
6.	https://mojoauth.com/hashing/sha-256-in-python/       
7.	https://sia.hackernoon.com/cryptographic-hash-functions-in-blockchain-with-bash-and-python-code     
8.	https://www.geeksforgeeks.org/python/sha-in-python/    
9.	https://github.com/AvinashNath2/Block-Chain-Example             
10.	https://drlee.io/building-your-own-blockchain-in-python-a-step-by-step-guide-ec10ea6c976d?gi=731ab874f824  
11.	https://codluck.com/build-a-blockchain-in-python-example/     
12.	https://blog.krybot.com/t/building-a-blockchain-in-python-a-step-by-step-guide/24234 
13.	https://www.tutorialspoint.com/python_blockchain/python_blockchain_transaction_class.htm      
14.	https://debtech0.wixsite.com/hashohaven/post/build-your-own-blockchain-with-python-and-flask    
15.	https://adgefficiency.com/blockchain-python/ 
16.	https://unogeeks.com/python-sha256/  
17.	https://www.geeksforgeeks.org/compiler-design/consensus-algorithms-in-blockchain/        
18.	https://www.scalingparrots.com/en/blockchain-consensus-algorithm/  
19.	https://www.developcoins.com/blockchain-consensus-algorithms  
20.	https://peerdh.com/nl/blogs/programming-insights/implementing-consensus-algorithms-in-python?page=69 
21.	https://www.barnesandnoble.com/w/learn-blockchain-by-building-one-daniel-van-flymen/1136669388  
22.	https://github.com/rafrasenberg/proof-of-stake-blockchain 
23.	https://softwareengineeringdaily.com/2017/10/12/blockchain-building-with-daniel-van-flymen/ 
24.	https://hackernoon.com/learn-blockchains-by-building-one-117428612f46 
25.	https://stackoverflow.com/questions/1718903/what-do-square-brackets-mean-in-function-class-documentation 
26.	https://ru.wikipedia.org/wiki/D_(язык_программирования) 
27.	https://en.wiktionary.org/wiki/a 
28.	https://en.wikipedia.org/wiki/N 
29.	https://en.wikipedia.org/wiki/I 
30.	https://en.wikipedia.org/wiki/É 
31.	https://www.britannica.com/topic/L-letter 
32.	https://www.reddit.com/r/ObsidianMD/comments/qso74d/what_is_the_function_of_single_square_brackets_in/ 
33.	https://ru.wikipedia.org/wiki/Витамин_D 
34.	https://www.merriam-webster.com/dictionary/a 
35.	https://dizionari.corriere.it/dizionario_italiano/N/n.shtml 
36.	https://www.merriam-webster.com/dictionary/i 
37.	https://en.wikipedia.org/wiki/E_(mathematical_constant) 
38.	https://www.merriam-webster.com/dictionary/l 
39.	https://www.youtube.com/watch?v=HoY4AAX30dQ 
40.	https://global.wildberries.ru/brands/d-104411 
41.	https://en.wikipedia.org/wiki/A 
42.	https://dictionary.cambridge.org/dictionary/english/n 
43.	https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/i 
44.	https://ru.wikipedia.org/wiki/E_(число) 
45.	https://github.com/craiglmccarthy/python-blockchain 
46.	https://softwareengineeringdaily.com/wp-content/uploads/2017/10/SED437-Build-a-Blockchain.pdf 
47.	https://www.tutorialspoint.com/python_blockchain/index.htm 
48.	https://www.youtube.com/watch?v=Qyn1NpMBv_I 
49.	https://github.com/janaSunrise/blockchain-python 
50.	https://dev.to/irenejpopova/blockchain-with-vue-python-flask-34hp 
51.	https://www.youtube.com/watch?v=Jt9MYcSsVzs 
52.	https://github.com/adilmoujahid/blockchain-python-tutorial 
53.	https://github.com/adilmoujahid/blockchain-python-tutorial/blob/master/LICENSE 
54.	https://www.youtube.com/watch?v=alNU9AVWkQk 
55.	https://github.com/lakki0704/Blockchain---PBFT-algorithm-in-Python 
56.	https://www.youtube.com/watch?v=YFn0iwU-Jz8 
57.	https://docs.python.org/3/library/hashlib.html 
58.	https://www.tutorialspoint.com/python_blockchain/python_blockchain_quick_guide.htm 
59.	https://stackoverflow.com/questions/48613002/sha-256-hashing-in-python 
